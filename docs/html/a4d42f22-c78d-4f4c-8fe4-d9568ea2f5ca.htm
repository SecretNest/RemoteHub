<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Virtual host</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="a4d42f22-c78d-4f4c-8fe4-d9568ea2f5ca" /><meta name="Description" content="Remote Hub supports virtual host mapping for load balancing." /><meta name="Microsoft.Help.ContentType" content="How To" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.3.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Remote Hub<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html\bd0fe8b6-fbbe-46a6-a55a-9de5c0d0cff9.htm" title="Remote Hub" tocid="roottoc">Remote Hub</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e84b359f-4609-429c-8b3f-d040a75ceae6.htm" title="How to" tocid="c7ab95c8-a402-4c27-9c17-a9e8d8543ff0">How to</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e84b359f-4609-429c-8b3f-d040a75ceae6.htm" title="Using Redis database" tocid="e84b359f-4609-429c-8b3f-d040a75ceae6">Using Redis database</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/fb014e2d-05c2-4da2-9ed3-0032564a7ae0.htm" title="Using streams" tocid="fb014e2d-05c2-4da2-9ed3-0032564a7ae0">Using streams</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/a4d42f22-c78d-4f4c-8fe4-d9568ea2f5ca.htm" title="Virtual host" tocid="a4d42f22-c78d-4f4c-8fe4-d9568ea2f5ca">Virtual host</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img src="../icons/Help.png" /></td><td class="titleColumn"><h1>Virtual host</h1></td></tr></table><span class="introStyle"></span> <div class="introduction"><p>Remote Hub supports virtual host mapping for load balancing.</p></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Virtual host</span></div><div id="ID0RBSection" class="collapsibleSection"><p>Virtual host is a function based on host mapping table. Remote Hub clients can register virtual hosts mapping on itself, declaring it is a part of the service provider of the virtual host. By this, service customer can choose provider based on load balancing.</p><p>Each virtual host record contains id, priority and weight. When resolving by id of a virtual host, all records with the same id and the highest priority will be queried and one will be selected randomly. The probability of the chosen recored is considered by the weight of all queried records.</p></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Set up virtual hosts</span></div><div id="ID1RBSection" class="collapsibleSection"><p>To set up virtual hosts, use the method <a href="ea2f6b93-41c0-ec4e-6fdd-e1b80a2e9fc5.htm">ApplyVirtualHosts</a> provided by any Remote Hub client. Each calling will override the current setting on this client. All virtual host settings need to passed within one call. Calling with argument set to null will clean all exists virtual host settings on this client.</p><p>A client can have up to 65535 virtual hosts. Each host have an virtual host id (as the key of the KeyValuePair), priority and weight (as members in VirtualHostSetting).</p><p>After method called, virtual host settings will be synchronized to all clients in the same network in a short while.</p></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Resolve a virtual host to an client</span></div><div id="ID2RBSection" class="collapsibleSection"><p>To resolve a virtual host, use the method <a href="06f15295-2581-00eb-ebd7-03a39002bd3f.htm">TryResolveVirtualHost</a> provided by any Remote Hub client.</p><p>This method will try to resolve a virtual host to an client, which will be passed out as the 2nd argument. Result of this method is whether the virtual host can be found.</p></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Stateful objects</span></div><div id="ID3RBSection" class="collapsibleSection"><p>When the service is handled with stateful object, like Event support in Remote Agency, user code needs to keep the real client id from the first resolving to make sure the same service object is chosen all the time for one client.</p><p>For example, when user code plans to remove a handler from an event in a remote site powered by Remote Agency and virtual host function, user code needs to use the recorded client id while adding the handler of this event as the target, instead of resolving it again.</p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID4RBSection" class="collapsibleSection"><h4 class="subHeading">Other Resources</h4><div class="seeAlsoStyle"><a href="7b9f6faa-8de5-4097-bad0-76e9295ccce0.htm">Interfaces of Remote Hub on Redis database</a></div><div class="seeAlsoStyle"><a href="d8f5d54c-994c-4cdc-8de9-a270cc00cf48.htm">Event support</a></div></div></div></div><div id="pageFooter" class="pageFooter" /></body></html>